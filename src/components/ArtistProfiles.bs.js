// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Css from "bs-css-emotion/src/Css.bs.js";
import * as Curry from "bs-platform/lib/es6/curry.js";
import BnJs from "bn.js";
import * as React from "react";
import * as Js_dict from "bs-platform/lib/es6/js_dict.js";
import * as RimbleUi from "rimble-ui";
import * as Belt_Array from "bs-platform/lib/es6/belt_Array.js";
import * as Belt_Float from "bs-platform/lib/es6/belt_Float.js";
import * as Belt_Option from "bs-platform/lib/es6/belt_Option.js";
import * as Belt_SetString from "bs-platform/lib/es6/belt_SetString.js";
import * as Animal$WildCards from "../harberger-lib/Animal.bs.js";
import * as Helper$WildCards from "../harberger-lib/Helper.bs.js";
import * as Styles$WildCards from "../Styles.bs.js";
import * as Blockie$WildCards from "../harberger-lib/bindings/ethereum-blockies-base64/Blockie.bs.js";
import * as Globals$WildCards from "../harberger-lib/Globals.bs.js";
import * as QlHooks$WildCards from "../harberger-lib/QlHooks.bs.js";
import * as TokenId$WildCards from "../harberger-lib/TokenId.bs.js";
import * as Web3Utils$WildCards from "../harberger-lib/Web3Utils.bs.js";
import * as RootProvider$WildCards from "../harberger-lib/RootProvider.bs.js";
import * as UpdateDeposit$WildCards from "../harberger-lib/components/UpdateDeposit.bs.js";
import * as UsdPriceProvider$WildCards from "../harberger-lib/components/UsdPriceProvider.bs.js";
import * as LazyThreeBoxUpdate$WildCards from "./LazyThreeBoxUpdate.bs.js";

var centreAlignOnMobile = Curry._1(Css.style, {
      hd: Css.media("(max-width: 831px)", {
            hd: Css.alignItems(Css.center),
            tl: {
              hd: Css.justifyContent(Css.center),
              tl: /* [] */0
            }
          }),
      tl: /* [] */0
    });

function ArtistProfiles$Token(Props) {
  var tokenId = Props.tokenId;
  var clearAndPush = RootProvider$WildCards.useClearNonUrlStateAndPushRoute(undefined);
  var image = Animal$WildCards.useAvatar(tokenId);
  return React.createElement("div", {
              className: Curry._1(Css.style, {
                    hd: Css.width(Css.vh(12)),
                    tl: /* [] */0
                  })
            }, React.createElement("img", {
                  className: Curry._1(Css.style, {
                        hd: Css.width({
                              NAME: "percent",
                              VAL: 100
                            }),
                        tl: /* [] */0
                      }),
                  src: image,
                  onClick: (function (_e) {
                      return Curry._1(clearAndPush, "/#details/" + TokenId$WildCards.toString(tokenId));
                    })
                }));
}

var Token = {
  make: ArtistProfiles$Token
};

function ArtistProfiles$ArtistDetails(Props) {
  var patronQueryResult = Props.patronQueryResult;
  var optThreeBoxData = Props.optThreeBoxData;
  var artistAddress = Props.artistAddress;
  var isForeclosed = QlHooks$WildCards.useIsForeclosed(/* MainnetQuery */2, artistAddress);
  var currentlyOwnedTokens = isForeclosed ? [] : Globals$WildCards.$pipe$pipe$pipe$pipe(Globals$WildCards.oMap(patronQueryResult.patron, (function (patron) {
                return Belt_Array.map(patron.tokens, (function (token) {
                              return token.id;
                            }));
              })), []);
  var allPreviouslyOwnedTokens = Globals$WildCards.$pipe$pipe$pipe$pipe(Globals$WildCards.oMap(patronQueryResult.patron, (function (patron) {
              return Belt_Array.map(patron.previouslyOwnedTokens, (function (token) {
                            return token.id;
                          }));
            })), []);
  var uniquePreviouslyOwnedTokens = isForeclosed ? allPreviouslyOwnedTokens : Belt_SetString.toArray(Belt_SetString.removeMany(Belt_SetString.fromArray(allPreviouslyOwnedTokens), currentlyOwnedTokens));
  var optProfile = Globals$WildCards.$great$great$eq(optThreeBoxData, (function (a) {
          return a.profile;
        }));
  var image = Belt_Option.mapWithDefault(Globals$WildCards.$great$great$eq(Globals$WildCards.$less$$great(Globals$WildCards.$great$great$eq(Globals$WildCards.$great$great$eq(optProfile, (function (a) {
                          return a.image;
                        })), (function (img) {
                      return Belt_Array.get(img, 0);
                    })), (function (a) {
                  return a.contentUrl;
                })), (function (content) {
              return Js_dict.get(content, "/");
            })), Blockie$WildCards.makeBlockie(artistAddress), (function (hash) {
          return "https://ipfs.infura.io/ipfs/" + hash;
        }));
  var optName = Globals$WildCards.$great$great$eq(optProfile, (function (a) {
          return a.name;
        }));
  var optDescription = Globals$WildCards.$great$great$eq(optProfile, (function (a) {
          return a.description;
        }));
  var optTwitter = Globals$WildCards.$less$$great(Globals$WildCards.$great$great$eq(Globals$WildCards.$great$great$eq(optThreeBoxData, (function (a) {
                  return a.verifications;
                })), (function (a) {
              return a.twitter;
            })), (function (a) {
          return a.username;
        }));
  var etherScanUrl = RootProvider$WildCards.useEtherscanUrl(undefined);
  var optUsdPrice = UsdPriceProvider$WildCards.useUsdPrice(undefined);
  var optMonthlyCotribution = Globals$WildCards.$less$$great(Globals$WildCards.$less$$great(patronQueryResult.patron, (function (patron) {
              return patron.patronTokenCostScaledNumerator.mul(new BnJs("2592000")).div(new BnJs("31536000000000000000"));
            })), (function (monthlyContributionWei) {
          var monthlyContributionEth = Web3Utils$WildCards.fromWeiBNToEthPrecision(monthlyContributionWei, 4);
          var optMonthlyContributionUsd = Globals$WildCards.$less$$great(optUsdPrice, (function (currentUsdEthPrice) {
                  return Globals$WildCards.toFixedWithPrecisionNoTrailingZeros(Belt_Option.mapWithDefault(Belt_Float.fromString(monthlyContributionEth), 0, (function (a) {
                                    return a;
                                  })) * currentUsdEthPrice, 2);
                }));
          return [
                  monthlyContributionEth,
                  optMonthlyContributionUsd
                ];
        }));
  var nonUrlState = RootProvider$WildCards.useNonUrlState(undefined);
  var clearNonUrlState = RootProvider$WildCards.useClearNonUrlState(undefined);
  var tmp;
  var exit = 0;
  if (typeof nonUrlState === "number") {
    switch (nonUrlState) {
      case /* UserVerificationScreen */0 :
          tmp = React.createElement("div", {
                className: Curry._1(Css.style, {
                      hd: Css.position("relative"),
                      tl: /* [] */0
                    })
              }, React.createElement(RimbleUi.Button.Text, {
                    onClick: (function (param) {
                        return Curry._1(clearNonUrlState, undefined);
                      }),
                    icononly: true,
                    icon: "Close",
                    color: "moon-gray",
                    position: "absolute",
                    top: 0,
                    right: 0,
                    m: 1
                  }), React.createElement(React.Suspense, {
                    children: React.createElement(LazyThreeBoxUpdate$WildCards.make, LazyThreeBoxUpdate$WildCards.makeProps(undefined, undefined)),
                    fallback: React.createElement(RimbleUi.Loader, {})
                  }));
          break;
      case /* UpdateDepositScreen */1 :
          tmp = React.createElement("div", {
                className: Curry._1(Css.style, {
                      hd: Css.position("relative"),
                      tl: /* [] */0
                    })
              }, React.createElement(RimbleUi.Button.Text, {
                    onClick: (function (param) {
                        return Curry._1(clearNonUrlState, undefined);
                      }),
                    icononly: true,
                    icon: "Close",
                    color: "moon-gray",
                    position: "absolute",
                    top: 0,
                    right: 0,
                    m: 1
                  }), React.createElement(UpdateDeposit$WildCards.make, {
                    closeButtonText: "Close",
                    chain: /* MainnetQuery */2
                  }));
          break;
      case /* NoExtraState */2 :
          exit = 1;
          break;
      
    }
  } else {
    exit = 1;
  }
  if (exit === 1) {
    tmp = React.createElement(React.Fragment, undefined, Globals$WildCards.reactMap(optName, (function (name) {
                return React.createElement("h2", undefined, Globals$WildCards.restr(name));
              })), Globals$WildCards.reactMap(optTwitter, (function (twitterHandle) {
                return React.createElement("a", {
                            className: Styles$WildCards.navListText,
                            href: "https://twitter.com/" + twitterHandle,
                            rel: "noopener noreferrer",
                            target: "_blank"
                          }, Globals$WildCards.restr("@" + twitterHandle));
              })), React.createElement("br", undefined), Globals$WildCards.reactMap(optDescription, (function (description) {
                return React.createElement("p", undefined, Globals$WildCards.restr(description));
              })), React.createElement("a", {
              className: Styles$WildCards.navListText,
              href: "https://" + (etherScanUrl + ("/address/" + artistAddress)),
              rel: "noopener noreferrer",
              target: "_blank"
            }, Globals$WildCards.restr(Helper$WildCards.elipsify(artistAddress, 10))), React.createElement("br", undefined));
  }
  return React.createElement("div", {
              className: Curry._1(Css.style, {
                    hd: Css.width({
                          NAME: "percent",
                          VAL: 100
                        }),
                    tl: /* [] */0
                  })
            }, React.createElement(RimbleUi.Flex, {
                  children: null,
                  flexWrap: "wrap",
                  alignItems: "start"
                }, React.createElement(RimbleUi.Box, {
                      p: 1,
                      children: null,
                      width: [
                        1,
                        1,
                        0.3333
                      ],
                      className: Curry._1(Css.style, {
                            hd: Css.textAlign("center"),
                            tl: /* [] */0
                          })
                    }, React.createElement("img", {
                          className: Curry._1(Css.style, {
                                hd: Css.borderRadius({
                                      NAME: "percent",
                                      VAL: 100
                                    }),
                                tl: {
                                  hd: Css.width({
                                        NAME: "vh",
                                        VAL: 25
                                      }),
                                  tl: {
                                    hd: Css.height({
                                          NAME: "vh",
                                          VAL: 25
                                        }),
                                    tl: {
                                      hd: Css.objectFit("cover"),
                                      tl: /* [] */0
                                    }
                                  }
                                }
                              }),
                          src: image
                        }), React.createElement("br", undefined), tmp), React.createElement(RimbleUi.Box, {
                      p: 1,
                      children: null,
                      width: [
                        1,
                        1,
                        0.3333
                      ]
                    }, React.createElement("h2", undefined, Globals$WildCards.restr("Monthly Contribution")), React.createElement("p", undefined, Globals$WildCards.reactMapWithDefault(optMonthlyCotribution, Globals$WildCards.restr("0 ETH"), (function (param) {
                                return React.createElement(React.Fragment, {
                                            children: null
                                          }, Globals$WildCards.restr("" + param[0] + " ETH\xa0"), Globals$WildCards.reactMap(param[1], (function (usdValue) {
                                                  return React.createElement("small", undefined, Globals$WildCards.restr("(" + usdValue + " USD)"));
                                                })));
                              })))), React.createElement(RimbleUi.Box, {
                      p: 1,
                      children: null,
                      width: [
                        1,
                        1,
                        0.3333
                      ]
                    }, currentlyOwnedTokens.length !== 0 ? React.createElement(React.Fragment, {
                            children: null
                          }, React.createElement(RimbleUi.Heading, {
                                children: "Currently owned tokens"
                              }), React.createElement(RimbleUi.Flex, {
                                children: Belt_Array.map(currentlyOwnedTokens, (function (tokenId) {
                                        return React.createElement(ArtistProfiles$Token, {
                                                    tokenId: TokenId$WildCards.fromStringUnsafe(tokenId),
                                                    key: tokenId
                                                  });
                                      })),
                                flexWrap: "wrap",
                                className: centreAlignOnMobile
                              }), React.createElement("br", undefined), React.createElement("br", undefined), React.createElement("br", undefined)) : (
                        uniquePreviouslyOwnedTokens.length !== 0 ? React.createElement("p", undefined, Globals$WildCards.restr("User currently doesn't currently own a wildcard.")) : React.createElement("p", undefined, Globals$WildCards.restr("User has never owned a wildcard."))
                      ), uniquePreviouslyOwnedTokens.length !== 0 ? React.createElement(React.Fragment, {
                            children: null
                          }, React.createElement(RimbleUi.Heading, {
                                children: "Previously owned tokens"
                              }), React.createElement(RimbleUi.Flex, {
                                children: Belt_Array.map(uniquePreviouslyOwnedTokens, (function (tokenId) {
                                        return React.createElement(ArtistProfiles$Token, {
                                                    tokenId: TokenId$WildCards.fromStringUnsafe(tokenId),
                                                    key: tokenId
                                                  });
                                      })),
                                flexWrap: "wrap",
                                className: centreAlignOnMobile
                              })) : null)));
}

var ArtistDetails = {
  make: ArtistProfiles$ArtistDetails
};

function ArtistProfiles(Props) {
  var artistIdentifier = Props.artistIdentifier;
  console.log(artistIdentifier);
  return React.createElement(RimbleUi.Flex, {
              children: "WIP",
              flexWrap: "wrap",
              alignItems: "center",
              className: Styles$WildCards.topBody
            });
}

var make = ArtistProfiles;

export {
  centreAlignOnMobile ,
  Token ,
  ArtistDetails ,
  make ,
  
}
/* centreAlignOnMobile Not a pure module */
